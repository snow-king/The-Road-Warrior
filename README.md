# The Road Warrior Kata

![image desc](./img/logo.webp)

## Содержание

1. [Welcome](#welcome)
2. [Business Case](#business-case)
    1. [Бизнес контекст](#бизнес-контекст)
    2. [Бизнес цели и бизнес-драйверы](#бизнес-цели-и-бизнес-драйверы)
    3. [Стейкхолдеры и их потребности](#стейкхолдеры-и-их-потребности)
    4. [Атрибуты качества](#атрибуты-качества)
3. [Описание требований](#описание-требований)
    1. [Пользовательские сценарии](#пользовательские-сценарии)
    2. [Сценарии для атрибутов качества](#сценарии-для-атрибутов-качества)
    3. [Критические характеристики](#критические-характеристики)
4. [Описание решения](#описание-решения)
    1. [Контекстная диаграмма](#контекстная-диаграмма)
    2. [Диаграмма контейнеров](#диаграмма-контейнеров)
    3. [Диаграммы последовательности для пользовательских сценариев](#диаграммы-последовательности-для-пользовательских-сценариев)
    4. [Архитектура системы](#описание-решения)

## Welcome

Эта страница содержит архитектурное решения для предложенной каты - Road Warrior.

## Business Case

Крупное туристическое агентство хочет создать следующее поколение онлайн-дашбордов для управления поездками, чтобы путешественники могли видеть все свои существующие бронирования, организованные по поездкам, либо онлайн, либо через свои мобильные устройства.
Пользователи: более 10,000 зарегистрированных пользователей по всему миру
Requirements:
Система должна взаимодействовать с существующими системами интерфейсов авиакомпаний, отелей и проката автомобилей агентства для автоматической загрузки бронирований через аккаунты частых пассажиров, аккаунты бонусных программ отелей и аккаунты программ вознаграждения проката автомобилей.

- Клиенты также должны иметь возможность добавлять существующие бронирования вручную.

- Элементы на дашборде должны быть сгруппированы по поездкам, и после завершения поездки элементы должны автоматически удаляться с дашборда.

- Пользователи также должны иметь возможность делиться информацией о своих поездках через интерфейсы стандартных социальных сетей.

- Наиболее богатый пользовательский интерфейс на всех платформах развертывания

Additional Context:

- Должна быть бесшовная интеграция с существующими системами путешествий.

- Ведутся переговоры о партнерских сделках для создания списка
предпочитаемых поставщиков.

- Должна работать на международном уровне.

### Бизнес контекст

Разработать дашборд, который будет собирать информацию и осуществлять управления о путешествиях пользователей, которые были оформлены в сторонних сервисах.

### Бизнес цели и бизнес-драйверы

1. Улучшение пользовательского опыта:
    - Создать удобный онлайн-дашборд для управления поездками, который позволит пользователям легко видеть и управлять всеми своими бронированиями.
    - Приложение должно быть кроссплатформенным
2. Увеличение клиентской базы и удержание существующих клиентов:
    - Предложить дополнительные функции, такие как автоматическая загрузка бронирований и возможность добавлять бронирования вручную, чтобы привлечь больше клиентов и удержать существующих.

3. Интеграция с системами партнеров:
   - Обеспечить бесшовную интеграцию с существующими системами авиакомпаний, отелей и проката автомобилей для автоматической загрузки бронирований и повышения взаимосвязанности системы.

4. Увеличение партнерских сделок
   - Разработать систему, которая поддерживает новые партнерские сделки с "предпочтительными" поставщиками, обеспечивая выгодные условия сотрудничества.

5. Увеличение активности в социальных сетях:
   - Дать пользователям возможность делиться своими планами поездок через социальные сети, чтобы повысить узнаваемость бренда агентства и привлечь новых клиентов через социальные каналы.

### Стейкхолдеры и их потребности

1. Путешественники (Users):
   - 10,000+ зарегистрированных пользователей по всему миру, которые будут использовать систему для управления своими поездками.

2. Клиенты/Покупатели (Customers):
   - Путешественники, у которых есть существующие авиабилеты, брони отелей и прокат автомобилей, и которые хотят управлять своими бронированиями через систему.

3. Агентство (Travel Agency):
   - Основной инициатор проекта, который хочет построить новый онлайн-интерфейс для управления поездками.

4. Разработчики/Техническая команда (Developers/Technical Team):
   - Разработка нового интерфейса, интеграция с существующими системами и обеспечение работы системы на всех платформах (веб и мобильные устройства).

5. Поставщики услуг (Service Providers):
   - Авиакомпании, гостиницы и прокатные компании, чьи системы будут интегрированы для автоматической загрузки бронирований.

6. Менеджеры по продукту (Product Managers):
   - Определяют требования и функции системы, обеспечивают соответствие продукта потребностям пользователей и бизнес-целям агентства.

7. Социальные медиаплатформы (Social Media Platforms)**:
   - Системы, с которыми будет взаимодействовать новый интерфейс для обмена информацией о поездках.

8. Международные пользователи и регуляторы (International Users and Regulators):

   - Использование системы на международном уровне, соблюдение международных стандартов и законодательств.

9. Информационная безопасность (IT Security):
    - Обеспечение безопасности данных пользователей, защищенность от кибератак и защита личной информации.

## Атрибуты качества

1. **Производительность и масштабируемость:**
    - **Производительность:**
      Система должна обеспечивать быстрое время отклика и загрузки страниц, даже при большой нагрузке. Время отклика при загрузке дашборда с большим количеством бронирований не должно превышать 2 секунд.
    - **Масштабируемость:**
      Система должна поддерживать более 10,000 зарегистрированных пользователей по всему миру и уметь легко масштабироваться для сервиса большого числа одновременных пользователей.

2. **Надежность и доступность:**
    - **Надежность:**
      Система должна быть устойчивой к сбоям и обеспечивать безотказное функционирование. Обновления и изменения в системах внешних поставщиков должны минимально влиять на работу системы.
    - **Доступность:**
      Система должна быть доступна 24/7 с показателями доступности не ниже 99.9%. В случае сбоя должны быть быстрые способы восстановления работоспособности системы.

3. **Безопасность:**
    - **Конфиденциальность данных:**
      Личные и бронирования данные пользователей должны быть защищены от несанкционированного доступа. Использование шифрования данных (как при передаче, так и при хранении) должно быть обеспечено.
    - **Аутентификация и авторизация:**
      Поддержка многофакторной аутентификации и возможность управлять доступом к различным уровням данных.

4. **Удобство использования:**
    - **Интуитивный интерфейс:**
      Пользовательский интерфейс должен быть интуитивно понятным и удобным в использовании, адаптированным как для настольных компьютеров, так и для мобильных устройств.

5. **Интероперабельность:**
    - **Интеграция с внешними системами:**
      Бесшовная интеграция с системами авиакомпаний, отелей и проката автомобилей для автоматической загрузки и обновления бронирований.

6. **Поддержка и обслуживание:**
    - **Процессы мониторинга и логирования:**
      Встроенные средства мониторинга производительности и логирования событий для выявления проблем на раннем этапе.
    - **Обслуживание и обновления:**
      Возможность легко вносить изменения и обновления в систему без значительного времени простоя.

7. **Портативность:**
    - **Многоязычная поддержка:**
      Возможность локализации интерфейса на различные языки, а также поддержка различных валют и форматов дат для международных пользователей.
    - **Кроссплатформа:**
      Система должна быть доступна и корректно работать на различных операционных системах и устройствах (Windows, macOS, iOS, Android и т.д.).

## Описание требований

### Пользовательские сценарии

1. Управление поездками онлайн

    зарегистрированный пользователь должен видеть все свои существующие бронирования, организованные по поездкам, чтобы он мог легко управлять своими поездками онлайн.

    - Пользователь может видеть список своих бронирований на дашборде.
    - Бронирования группируются по поездкам.

2. Автоматическая загрузка бронирований

    Зарегистрированный пользователь должен автоматически загружать свои бронирования из аккаунтов привилегированных программ авиакомпаний, отелей и проката автомобилей чтобы не вводить данные вручную.

    - Система автоматически загружает бронирования из аккаунтов пользователя (частые полеты, бонусные программы отелей, программы вознаграждения проката автомобилей).
    - Пользователь видит уведомление о загруженных бронированиях.

3. Ручное добавление бронирований

    зарегистрированный пользователь должен иметь возможность вручную добавлять свои существующие бронирования, чтобы они отображались в моем дашборде

    - Пользователь может добавить бронирование вручную, заполнив форму на сайте или в мобильном приложении.
    - Добавленные вручную бронирования отображаются на дашборде.

4. Удаление завершенных поездок

    зарегистрированный пользователь видит что завершенные поездки автоматически удалялись с моего дашборда, чтобы дашборд оставался актуальным и не перегруженным.

    - Завершенные поездки автоматически удаляются с дашборда пользователя.
    - Пользователь может вручную обозначить поездку как завершенную, если это не происходит автоматически.

5. Обмен информацией о поездках через социальные сети

    зарегистрированный пользователь имеет возможность делиться информацией о своих поездках через социальные сети, чтобы делиться своими планами с друзьями и семьей.

6. Интеграция с существующими системами

    владелец бизнеса может интегрировать новый дашборд с существующими системами авиакомпаний, отелей и проката автомобилей, чтобы обеспечить бесшовное взаимодействие и снизить затраты на установку.

    - Новый дашборд интегрируется с системами бронирования авиакомпаний, отелей и проката автомобилей.
    - Информация из этих систем автоматически загружается и обновляется в дашборде.

### Сценарии для атрибутов качества

1. Производительность и масштабируемость:
    - *Производительность*:
    Система должна обеспечивать быстрое время отклика и загрузки страниц, даже при большой нагрузке. Время отклика при загрузке дашборда с большим количеством бронирований не должно превышать 2 секунд.
    - *Масштабируемость*:
    Система должна поддерживать более 10,000 зарегистрированных пользователей по всему миру и уметь легко масштабироваться для сервиса большого числа одновременных пользователей.

2. Надежность и доступность:

    - *Надежность*:
    Система должна быть устойчивой к сбоям и обеспечивать безотказное функционирование. Обновления и изменения в системах внешних поставщиков должны минимально влиять на работу системы.

    - *Доступность*:
    Система должна быть доступна 24/7 с показателями доступности не ниже 99.9%. В случае сбоя должны быть быстрые способы восстановления работоспособности системы.

3. Безопасность:
    - *Конфиденциальность данных*:
    Личные и бронирования данные пользователей должны быть защищены от несанкционированного доступа. Использование шифрования данных (как при передаче, так и при хранении) должно быть обеспечено.
    - *Аутентификация и авторизация*:
    Поддержка многофакторной аутентификации и возможность управлять доступом к различным уровням данных.

4. Удобство использования:
    - Интуитивный интерфейс:
    Пользовательский интерфейс должен быть интуитивно понятным и удобным в использовании, адаптированным как для настольных компьютеров, так и для мобильных устройств.

5. Интероперабельность:
    - Интеграция с внешними системами:
    Бесшовная интеграция с системами авиакомпаний, отелей и проката автомобилей для автоматической загрузки и обновления бронирований.

6. Поддержка и обслуживание:
    - Процессы мониторинга и логирования: Встроенные средства мониторинга производительности и логирования событий для выявления проблем на раннем этапе.
    - Обслуживание и обновления: Возможность легко вносить изменения и обновления в систему без значительного времени простоя.

7. Портативность:
    - Многоязычная поддержка: Возможность локализации интерфейса на различные языки, а также поддержка различных валют и форматов дат для международных пользователей.
    - Кроссплатформа: Система должна быть доступна и корректно работать на различных операционных системах и устройствах (Windows, macOS, iOS, Android и т.д.).

### Критические характеристики

1. Интеграция с существующими системами агентства:
   - Бесшовное взаимодействие с текущими системами авиакомпаний, отелей и аренды автомобилей.
   - Надежный и быстрый процесс синхронизации данных.

2. UIxUX:
   - Интуитивно понятный и максимально функциональный интерфейс на всех платформах.
   - Поддержка нескольких языков и валют для международных пользователей.

3. Безопасность данных и конфиденциальность:
   - Обеспечение защиты личной информации пользователей и данных бронирований.
   - Соответствие международным стандартам безопасности и конфиденциальности.

4. Гибкость и масштабируемость
   - Возможность добавления новых партнеров и «предпочитаемых» поставщиков.
   - Обработка большого числа пользователей .

5. Интеграция с соц сетями:
   - Поддержка стандартных соцсетей для возможности делиться поездками
   - Простота и безопасность в авторизации и подключении аккаунтов социальных сетей.

6. Работа в режиме реального времени:
   - Мгновенное обновление данных бронирования и информации о поездках.
   - Автоматическое обновление панели управления при изменении статуса бронирования.

## Описание решения

### Контекстная диаграмма

![image desc](./img/context%20diagram.png)

### Диаграмма контейнеров

![alt text](./img/container%20diagram.png)

### Деплоймент диаграмма

![alt text](/img/deployment.png)

1. NGINX (Reverse Proxy):
    - Управляет входящими запросами.
    - Направляет запросы к соответствующим сервисам (UI, API, Backend).
    - Поддерживает SSL для безопасности.

2. Kubernetes Cluster:
    - Управляет развертыванием и масштабированием контейнеров.
    - Состоит из Master Node (управляющий узел) и нескольких Worker Nodes.

3. Pods и сервисы:
    - Web Service Pods: обрабатывают пользовательские запросы, предоставляют UI.
    - Backend Service Pods: отвечают за бизнес-логику, управление поездками и взаимодействие с социальными сетями.
    - Integration Pods: обрабатывают запросы к внешним системам (авиакомпании, отели и т.д.).

4. Stateful Storage Pods:
    - PostgreSQL: хранение основных данных о пользователях, бронированиях и поездках.
    - Redis: кэширование данных для ускорения.

5. Интеграция с внешними API:
    - Все интеграции происходят через Integration Pods для изоляции и упрощения работы с внешними сервисами.

### Диаграммы последовательности для пользовательских сценариев

![alt text](./img/sequence%20diagram.png)

## Обзор диаграммы последовательности

1. **Действия пользователей:**
    - Пользователи могут просматривать существующие бронирования и организовывать их по поездкам.
    - Они могут добавлять новые бронирования вручную.
    - Они могут делиться информацией о своих поездках в социальных сетях.

2. **Взаимодействия системы:**
    - Система автоматически загружает данные о бронированиях от партнеров (авиакомпаний, отелей и сервисов аренды автомобилей) на основе аккаунтов программ лояльности.
    - Завершенные поездки автоматически удаляются с дашборда (переводятся в неактивные, для сохранности данных).

3. **Внешние интеграции:**
    - Интеграция с внешними системами для авиакомпаний, отелей и аренды автомобилей.
    - API социальных сетей для возможности делиться поездками.

## Оценка атрибутов качества

1. **Надежность:**
    - **Сценарий:** Пользователи могут просматривать актуальную информацию о бронированиях без задержек и ошибок.
    - **Характеристики:** Использование резервных источников данных и частая синхронизация для обеспечения надежности данных о бронированиях.
    - **Сложности:** Обработка неудачных запросов к API с помощью механизмов повторных попыток и журналирования ошибок.

2. **Производительность:**
    - **Сценарий:** Быстрая загрузка информации на дашборде, даже для пользователей с большим количеством поездок.
    - **Характеристики:** Эффективное использование кэша и индексация базы данных для быстрого доступа.
    - **Сложности:** Минимизация времени отклика при высокой нагрузке и оптимизация получения данных из внешних API.

3. **Модифицируемость:**
    - **Сценарий:** Добавление нового поставщика услуг или интеграция с новой социальной сетью.
    - **Характеристики:** Модульный API-слой с адаптерами для различных поставщиков и внешних систем.
    - **Сложности:** Убедиться, что новые интеграции не влияют на существующую функциональность и легко настраиваются.

4. **Масштабируемость:**
    - **Сценарий:** Система может поддерживать большое количество пользователей и транзакций.
    - **Характеристики:** Облачная инфраструктура с балансировкой нагрузки и горизонтальным масштабированием.
    - **Сложности:** Обработка пиковых нагрузок, например, в праздничные дни или во время сбоев в путешествиях.

5. **Удобство использования:**
    - **Сценарий:** Пользователи могут интуитивно управлять поездками и делиться ими.
    - **Характеристики:** Удобный дашборд, который четко организует поездки и предоставляет легкий доступ к функциям для обмена.
    - **Сложности:** Обеспечение согласованности интерфейсов веб- и мобильной версии, а также поддержка различных языков для международных пользователей.
